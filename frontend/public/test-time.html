<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>时间格式化测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-item { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .timestamp { font-weight: bold; color: #333; }
        .result { color: #007bff; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <h1>时间格式化测试</h1>
    <div id="results"></div>

    <script>
        // 修复后的时间格式化函数
        const formatDateTime = (timestamp) => {
            if (!timestamp) return 'Invalid Date'
            
            try {
                // 如果时间戳已经包含时区信息，直接解析
                if (timestamp.includes('T') || timestamp.includes('Z') || timestamp.includes('+')) {
                    return new Date(timestamp).toLocaleString('zh-CN')
                }
                
                // 否则，假设是UTC时间，添加Z后缀
                return new Date(timestamp + 'Z').toLocaleString('zh-CN')
            } catch (error) {
                console.warn('Invalid timestamp:', timestamp)
                return 'Invalid Date'
            }
        }

        // 测试数据
        const testTimestamps = [
            '2025-10-29 02:19:10',
            '2025-10-29 02:09:20',
            '2025-10-29T02:19:10Z',
            '2025-10-29T10:19:10+08:00',
            null,
            '',
            'invalid-date'
        ];

        // 显示结果
        const resultsDiv = document.getElementById('results');
        
        testTimestamps.forEach((timestamp, index) => {
            const div = document.createElement('div');
            div.className = 'test-item';
            
            const result = formatDateTime(timestamp);
            const isError = result === 'Invalid Date';
            
            div.innerHTML = `
                <div class="timestamp">输入: ${JSON.stringify(timestamp)}</div>
                <div class="${isError ? 'error' : 'result'}">输出: ${result}</div>
            `;
            
            resultsDiv.appendChild(div);
        });

        // 显示当前时间
        const currentDiv = document.createElement('div');
        currentDiv.className = 'test-item';
        currentDiv.innerHTML = `
            <div class="timestamp">当前时间</div>
            <div class="result">${new Date().toLocaleString('zh-CN')}</div>
        `;
        resultsDiv.appendChild(currentDiv);
    </script>
</body>
</html>
