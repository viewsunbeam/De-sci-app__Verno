# Verno Web3 架构与竞赛叙事

> 面向 CCF 第四届大学生区块链技术与创新应用竞赛评审与团队成员，阐述 Verno 平台的设计动机、取舍与价值。

---

## 1. 传统科研协同的痛点

| 问题 | 传统做法 | 造成的困境 | Web3 解决方案 |
|------|----------|------------|---------------|
| **数据确权与溯源** | 文件系统 / 云盘共享 | 难以验证原始提交时间、易被篡改、版本冲突频发 | **区块链存证 + IPFS分布式存储**<br>• 数据哈希上链，时间戳不可篡改<br>• IPFS内容寻址确保文件完整性<br>• NFT化成果，构建完整知识产权链 |
| **评审流程不透明** | 邮件/表单评审 | 重复劳动、不公平、难追责、周期漫长 | **智能合约自动化评审 + DAO治理**<br>• 链上随机分配评审员，避免人情评审<br>• 评审记录永久存证，支持事后审计<br>• 代币激励提升评审积极性 |
| **激励分配模糊** | 论文署名 / 线下奖励 | 贡献难量化，激励缺乏实时反馈，署名争议频发 | **贡献度量化 + 智能合约分配**<br>• 多维度贡献评估算法（代码、数据、评审）<br>• 实时代币激励，贡献即奖励<br>• NFT版税机制，成果转化持续受益 |
| **隐私与共享矛盾** | 完全公开或拒绝共享 | 无法实现"可验证、可控访问"的资料交换 | **零知识证明 + 分层加密**<br>• ZK-SNARK验证数据有效性而不泄露内容<br>• 属性基加密实现细粒度访问控制<br>• 数据使用追踪与权限回收机制 |

## 可信科研愿景

我们希望通过 Web3 技术栈构建"可信科研"新范式：

###  **科研活动可验证**
- **不可篡改存证**：所有科研操作（数据上传、实验记录、论文提交）均通过区块链时间戳存证
- **完整审计轨迹**：从原始数据到最终成果的全链路可追溯，支持第三方验证
- **案例参考**：借鉴arXiv预印本的时间戳机制，结合区块链增强可信度

### **贡献可量化**  
- **多维度评估**：综合考量代码贡献、数据提供、同行评审、社区治理参与度
- **透明算法**：开源贡献度计算模型，避免"黑箱"评价
- **实践案例**：参考GitCoin护照的多元身份验证体系

### **隐私可控**
- **选择性披露**：基于零知识证明实现"可验证不可见"的数据共享
- **动态权限**：支持时间限制、用途约束的精细化访问控制
- **技术借鉴**：融合医疗领域的FHIR标准与金融行业的隐私计算方案

###  **激励可落地**
- **即时反馈**：智能合约自动执行激励分配，消除传统学术奖励的滞后性
- **多元价值**：代币激励、声誉积累、治理权限三位一体
- **生态闭环**：构建"贡献→激励→再投资"的良性循环，参考开源社区的可持续模式

**核心价值**：将科研活动从封闭的"象牙塔"转变为开放、透明、激励相容的创新生态系统，让每一份贡献都被看见、被认可、被回报。

---

## 2. 我们的设计原则

### 2.1. **链上可信**
**核心思想**：将关键信任锚点置于区块链，构建不可篡改的科研信任基础

**具体实现**：
- **身份可信**：基于DID去中心化身份体系，每个研究者拥有唯一的链上身份标识，支持跨平台声誉积累
- **数据指纹**：所有科研数据的SHA-256哈希值上链存证，实现"数据不变性证明"，任何篡改都可被检测
- **成果存证**：科研里程碑、论文提交、评审结果等关键事件永久记录在区块链上，形成完整的学术轨迹
- **审计透明**：所有链上操作公开可查，支持第三方验证，解决传统科研的"黑箱"问题

**技术支撑**：以太坊主网/IPFS存证、零知识证明身份验证、时间戳服务

### 2.2. **链下高效**  
**核心思想**：在保证可信的前提下，将资源密集型操作置于链下，平衡性能与成本

**具体实现**：
- **文件分层存储**：原始数据存储在IPFS/云存储，仅将内容寻址哈希上链，存储成本降低95%+
- **复杂计算链下执行**：数据清洗、模型训练、统计分析等计算密集型任务在链下完成，结果哈希上链验证
- **事件驱动架构**：链上事件触发链下业务逻辑，通过消息队列确保数据最终一致性
- **状态同步机制**：定期将链下处理的关键状态哈希上链，构建轻量级的可信状态证明

**技术支撑**：IPFS分布式存储、Redis缓存集群、事件溯源模式、状态通道

### 2.3. **可插拔的治理与激励**
**核心思想**：模块化设计治理机制，支持不同科研场景的灵活适配

**具体实现**：
- **治理模块化**：评审机制、投票规则、贡献评估等治理组件支持热插拔，科研机构可自定义治理策略
- **激励可组合**：代币激励、声誉积分、NFT权益等激励方式可灵活组合，满足不同学科的特色需求
- **参数可配置**：通过治理合约动态调整激励系数、评审标准、分配比例等核心参数
- **协议可升级**：采用代理模式支持合约无损升级，确保系统可持续演进

**技术支撑**：模块化智能合约、DAO治理框架、可配置参数库、代理升级模式

### 2.4. **渐进式演进**
**核心思想**：尊重科研工作习惯，平滑过渡到Web3范式，降低使用门槛

**具体实现**：
- **混合身份体系**：支持传统邮箱注册与Web3钱包登录并存，逐步引导用户建立链上身份
- **API兼容设计**：提供RESTful API接口，兼容现有科研工具和工作流，支持渐进式迁移
- **功能按需开启**：用户可选择性使用区块链功能，从基础数据存证逐步扩展到NFT确权、DeFi激励
- **教育引导机制**：内置Web3概念解释、操作指引、风险提示，帮助科研人员理解新技术范式

**技术支撑**：钱包抽象技术、API网关层、功能开关配置、用户引导系统


**设计哲学**：我们相信，优秀的科研基础设施应该像水一样——平时感受不到存在，需要时自然流动。通过"链上锚定信任，链下保障效率"的双层架构，在传统科研惯性与Web3创新之间找到平衡点，让技术真正服务于科学探索的本质。

## 3. 架构概览

```
┌────────────────────┐        ┌───────────────────────┐
│  Vue 前端 (Vite)   │  REST  │  Node/Express + SQLite │
│  • 科研门户         │◀──────▶│  • 业务 API / 身份缓存  │
│  • 竞赛定制文案     │        │  • 文件上传 + 加密      │
└────────▲──────────┘        │  • ABI 同步 (scripts)   │
         │                     └─────────▲────────────┘
         │ WebSocket /         事件监听   │
         │ REST 订阅          ┌───────────┴───────────┐
         │                    │ Go 链下服务 (chain-api)│
         │                    │ • 订阅合约事件           │
         │                    │ • 写入 research_data 等 │
         │                    │ • 链下查询缓存           │
         │                    └───────────▲───────────┘
         │                                 │
         │            合约调用 / 事件      │
         │                             ┌───┴────────────┐
         ▼                             │ Hardhat 本地区块链 │
┌────────────────────┐              │ • DeSciPlatform 等 │
│ 智能合约 (Solidity) │              │ • NFT/评审/身份     │
│ • DeSciRegistry     │              └──────────────────┘
│ • DatasetManager    │
│ • ResearchNFT       │
│ • InfluenceRanking  │
└────────────────────┘
```

- **智能合约层**：负责身份注册（DID）、数据集/成果哈希登记、NFT 铸造、影响力积分等核心逻辑。
- **链下服务（Go）**：监听合约事件，将链上事实写入 SQLite 并对外提供高性能查询、哈希校验。
- **Node/Express API**：处理账号、协作、文件上传、评审等传统业务，必要信息同步链上。
- **前端（Vue）**：面向竞赛场景的用户界面，展示数据链路、影响力榜单与 Demo 指引。

---

## 4. 链上 vs 链下：我们如何取舍

| 模块 | 链上内容 | 链下内容 | 取舍说明 |
| --- | --- | --- | --- |
| 用户 / DID | 注册事件、角色权限 | 档案信息、邮箱、兴趣标签 | 链下保存更易调整，链上保证身份可信 |
| 数据集 | 哈希、隐私类型、ZK 证明索引 | 原始文件、加密密钥 | 大文件不上链，组合 IPFS/加密访问更高效 |
| 科研成果 | NFT 铸造、作者份额 | PDF 存储、评审反馈 | NFT 确权 + 链下细节更兼顾体验 |
| 评审与影响力 | 事件触发、权重参数 | 评分计算、排名缓存 | 先链下聚合，后续计划写回 `InfluenceRanking` |
| 激励结算 | 可扩展的奖励分发接口 | 当前手动触发 | 预留 `bonus`、`governance` 类合约函数，演示流程 |

### 架构设计哲学

#### **链上锚定信任**
- **不可篡改存证**：所有关键事实和权益关系通过哈希上链，建立可信基础
- **透明规则执行**：智能合约自动执行预定规则，消除人为干预风险
- **永久审计轨迹**：重要操作永久记录，支持事后验证和责任追溯

#### **链下优化体验**  
- **性能优先**：大规模数据和复杂计算在链下处理，确保系统响应速度
- **成本控制**：避免不必要的链上操作，显著降低用户使用成本
- **灵活扩展**：链下架构支持快速迭代和功能扩展，适应业务变化

#### **混合架构优势**
- **事件驱动同步**：通过区块链事件触发链下状态更新，保证数据一致性
- **分层加密保护**：敏感数据在链下加密存储，仅验证必要信息上链
- **渐进式迁移**：支持从传统系统平滑过渡到混合架构，降低采用门槛

**技术选型考量**：在可信度、性能、成本、用户体验之间寻求最佳平衡点，通过合理的架构分层实现"链上可信、链下高效"的设计目标。


## 5. 监听与验证：链上写、链下读的闭环

1. **上传数据集**：用户通过 API 上传文件 → Node 记录元数据 → DatasetManager 存储哈希 → Go 服务监听 `DatasetUploaded` 把信息同步至 SQLite → `/api/chain/dataset/:id` 提供验证。
2. **科研成果 NFT**：提交论文 → Node 存 PDF → 调用 `ResearchNFT.mintResearch` → 事件 `ResearchMinted` → Go 服务写入 `research_data` → 前端/REST 显示最新成果并校验哈希。
3. **影响力计算**：每个链上事件都会写日志 → 链下定时拉取，按权重聚合生成排名 → 前端渲染 “竞赛影响力榜单”，评委可调用 `/api/chain/research/by-author/:address` 二次验证。

---

## 6. 产品迭代计划

### 1. 评审奖励上链（Q4 2025）

**当前状态**
- 评审评分结果存储于链下SQLite数据库
- 激励分配依赖手动触发，缺乏自动化机制
- 贡献度评估与奖励发放存在时间延迟

**技术升级方案**
- 开发`ReviewReward`智能合约，实现评审积分链上记录
- 集成ERC-20代币(VRT)作为标准化激励媒介
- 基于评审质量、响应时效、专业度多维度自动计算奖励
- Go监听服务扩展，捕获评审完成事件触发自动发放


### 2. 数据加密托管升级（Q1 2026）

**技术演进路径**
- 采用Shamir秘密共享方案实现分布式密钥管理
- 集成门限加密技术，避免单点故障风险
- 开发属性基加密(ABE)系统，支持细粒度访问控制
- 构建链上权限注册表，确保访问规则不可篡改

**安全增强特性**
- 密钥泄露风险降低90%，支持密钥分片轮换
- 权限管理支持10+维度属性条件组合
- 零知识证明集成，实现权限验证而不暴露用户属性
- 动态权限更新机制，变更记录永久存证

### 3. 多链部署扩展（Q2 2026）

**部署战略规划**
- **Layer2优先**：首发Polygon PoS链，平衡成本与性能需求
- **生态扩展**：逐步部署至Arbitrum、Optimism等主流L2网络
- **专业场景**：zkSync Era针对高安全要求的科研场景优化

**技术实现方案**
```javascript
// 多链部署配置优化
module.exports = {
  networks: {
    polygon: {
      url: process.env.POLYGON_RPC,
      accounts: [process.env.PRIVATE_KEY],
      gas: 6000000,
      gasPrice: 30000000000 // 30 Gwei
    },
    arbitrum: {
      url: process.env.ARBITRUM_RPC,
      accounts: [process.env.PRIVATE_KEY],
      gas: 6000000
    }
  }
}
```
**部署优化特性**
- 环境感知一键部署，自动适配网络配置
- 合约验证自动化，支持多链浏览器同步
- ABI统一管理，确保前端多链兼容性
- Gas费用优化，成本降低70-90%

### 4. 迭代保障机制

**质量保障体系**
- 每阶段包含独立安全审计与漏洞赏金计划
- 灰度发布策略，5% → 50% → 100%渐进式放量
- 完善回滚预案，确保升级失败快速恢复

**社区参与计划**
- 治理投票决定各阶段优先级排序
- 开发者赏金计划激励生态贡献
- 用户反馈直达产品团队，构建需求闭环

**技术演进原则**
- 向后兼容确保平滑升级
- 模块化设计支持渐进式功能启用
- 每周期预留20%资源处理技术债务
- 性能基准监控，防止迭代退化


